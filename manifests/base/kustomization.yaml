apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Base namespaces
  - namespace.yaml
  - client-egress-proxy-demo/namespace.yaml

  # Base components
  - service-account.yaml
  - deployment.yaml
  - service.yaml

  # Client egress proxy demo
  - client-egress-proxy-demo/deployment.yaml

  # Egress multitenant demo application
  - egress-multitenant-demo

commonLabels:
  app: scaleway-proxy

images:
  - name: ghcr.io/monitob/scaleway-k8s-egres-proxy
    newTag: latest

configMapGenerator:
  - name: client-egress-config
    behavior: create
    literals:
      - PROXY_ADDRESS=172.16.28.8
      - PROXY_PORT=3128

secretGenerator:
  - name: app-secrets
    behavior: create
    literals:
      - JWT_SECRET=base-jwt-secret-change-in-production
      - DATABASE_URL=base-database-url
      - QDRANT_API_KEY=base-qdrant-key
